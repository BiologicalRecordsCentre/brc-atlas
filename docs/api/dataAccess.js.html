<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: dataAccess.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: dataAccess.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module dataAccess */

import * as d3 from 'd3'

function csvMonad(file) {
  return csvGr(file, 1000)
}
function csvTetrad(file) {
  return csvGr(file, 2000)
}
function csvQuadrant(file) {
  return csvGr(file, 5000)
}
function csvHectad(file) {
  return csvGr(file, 10000)
}
function csvGr(file, precision) {
  if (file) {
    return new Promise((resolve, reject) => {
      d3.csv(file, function(r) {
        if (r.gr) {
          return({
            gr: r.gr,
            caption: `&lt;strong>Grid ref: &lt;/strong>${r.gr}`,
            colour: r.colour,
            shape: r.shape,
            opacity: r.opacity,
            size: r.size,
          })
        }
      }).then(function(data) {
        resolve({
          records: data,
          precision: precision,
        })
      }).catch(function(e){
        reject(e)
      })
    })
  } else {
    return Promise.resolve()
  }
}

/** @constant
* @description This object has properties corresponding to a number of data access
* functions that can be used to load data provided in standard formats. There are
* four functions accessed through the keys listed below.
* &lt;ul>
* &lt;li> &lt;b>Standard monad&lt;/b> expects the grid references to be monads (1 km resolution).
* &lt;li> &lt;b>Standard tetrad&lt;/b> expects the grid references to be tetrads (2 km resolution).
* &lt;li> &lt;b>Standard quadrant&lt;/b> expects the grid references to be quadrants (5 km resolution).
* &lt;li> &lt;b>Standard hectad&lt;/b> expects the grid references to be hectads (10 km resolution).
* &lt;/ul>
* Each of the
* data accessor functions referenced by these keys takes a single argument which is the path (or URL) of
* a CSV that contains data in a standard format. The columns which must be present in the 
* CSV are described below (the order is not important).
* &lt;ul>
* &lt;li> &lt;b>gr&lt;/b> - the grid referece which must be of the correct precision for the function.
* &lt;li> &lt;b>shape&lt;/b> - describes the shape that will be displayed at that location,
* valid values are: circle, square, diamond, triangle-up, triangle-down.
* &lt;li> &lt;b>size&lt;/b> - a number between 0 and 1 which will be used as a factor to resize the
* dot symbol displayed on the map.
* &lt;li> &lt;b>colour&lt;/b> - a colour for the symbol which can be hex format, e.g. #FFA500, 
* RGB format, e.g. rgb(100, 255, 0) or a named colour, e.g. red.
* &lt;li> &lt;b>opacity&lt;/b> - a number between 0 and 1 used to set the opacity of the symbol
* (0 is fully transparent and 1 fully opaque).
* &lt;li> &lt;b>caption&lt;/b> - an html string that will be used to update an element identified
* by the &lt;i>captionId&lt;/i> option of an svg or leaflet map when the mouse cursor moves over the
* element representing this gr on the map.
* &lt;/ul>
*  @type {object}
*/
export const dataAccessors = {
  'Standard monad': csvMonad,
  'Standard tetrad': csvTetrad,
  'Standard quadrant': csvQuadrant,
  'Standard hectad': csvHectad
}


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-dataAccess.html">dataAccess</a></li><li><a href="module-slippyMap.html">slippyMap</a></li><li><a href="module-svgCoords.html">svgCoords</a></li><li><a href="module-svgLegend.html">svgLegend</a></li><li><a href="module-svgMap.html">svgMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Apr 27 2022 07:01:43 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
