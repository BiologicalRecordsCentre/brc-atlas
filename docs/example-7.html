<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BRC Atlas Library example 7</title>
</head>
<body>
  <div class="content">
    <h1>Using the BRC Atlas Library</h1>
    <p>
      Explore the source of this page and examine the code comments to see how it works.
      Included on this page:
      <ul>
        <li>Displaying a leaflet map with atlas data</li>
        <li>Downloading map (dot) data</li>
      </ul>
    </p>
    <h2>Show a Leaflet distribution map from a CSV file</h2>
    <p>
      Demonstrates the most basic configuration required to created
      a Leaflet map using the BRC atlas library.
    </p>
    <div id="map"></div>
    <button onclick="downloadData()">Download CSV</button>
    <button onclick="downloadData(true)">Download GeoJson</button>
  </div>

  <!--Page CSS-->
  <link rel="stylesheet" href="example.css" />

  <!--D3 JS required exernal dependency of BRC Atlas library-->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!--Leaflet JS required exernal dependency of BRC Atlas library-->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

  <!--BRC Atlas library JS and CSS
  Here we get the resources in this package-->
  <script src="./../dist/brcatlas.umd.js"></script>
  <link rel="stylesheet" type="text/css" href="./../dist/brcatlas.umd.css">
  <!--But you can get them from the CDNs as shown below-->
  <!-- <script src="https://cdn.jsdelivr.net/gh/biologicalrecordscentre/brc-atlas@latest/dist/brcatlas.umd.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/biologicalrecordscentre/brc-atlas@latest/dist/brcatlas.umd.css"> -->

  <script>
    const map = brcatlas.leafletMap({
      selector: "#map",
      //mapTypesKey: 'Standard hectad'
    })
    map.setIdentfier('./data/example-hectads-1.csv')
    map.redrawMap()

    function downloadData(asGeojson) {
      map.downloadData(asGeojson)
    }
  </script>
</body>
</html>